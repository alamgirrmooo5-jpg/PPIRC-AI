<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Untitled</title>
  

</head>
<body>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PPIRC AI<br>Your AI friend </title>
  <style>
    body {
      background: linear-gradient(135deg, #111, #333);
      color: white;
      font-family: Arial, sans-serif;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #0ff;
    }

    .robot-container {
      perspective: 1000px;
      margin-bottom: 30px;
    }

    .robot-face {
      width: 300px;
      height: 300px;
      background: linear-gradient(145deg, #555, #333);
      border-radius: 20px;
      position: relative;
      box-shadow: 
        0 0 30px rgba(0, 0, 0, 0.7),
        inset 0 -10px 20px rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transform-style: preserve-3d;
      transform: rotateY(5deg);
      transition: transform 0.5s;
    }

    .robot-face:hover { transform: rotateY(0deg); }

    .face-plate {
      position: absolute;
      width: 90%;
      height: 90%;
      background: linear-gradient(145deg, #666, #444);
      border-radius: 15px;
      box-shadow: 
        inset 0 0 20px rgba(0, 0, 0, 0.5),
        0 5px 15px rgba(0, 0, 0, 0.3);
      z-index: 1;
    }

    .ear {
      width: 20px;
      height: 60px;
      background: linear-gradient(to bottom, #444, #222);
      position: absolute;
      top: 90px;
      border-radius: 10px;
      transition: all 0.3s;
      z-index: 0;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);
    }

    .left-ear { left: -25px; transform: rotateY(-10deg); }
    .right-ear { right: -25px; transform: rotateY(10deg); }

    .ear.listening {
      box-shadow: 0 0 15px 5px #0ff;
      background: linear-gradient(to bottom, #0aa, #066);
    }

    .eyes {
      display: flex;
      justify-content: space-around;
      width: 80%;
      margin-bottom: 30px;
      z-index: 2;
    }

    .eye {
      width: 50px;
      height: 50px;
      background: #000;
      border-radius: 50%;
      box-shadow: 
        inset 0 0 20px #0ff, 
        0 0 20px #0ff,
        0 5px 15px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
    }

    .eye::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background: #0ff;
      border-radius: 50%;
      top: 10px;
      left: 15px;
      box-shadow: 0 0 10px #0ff;
      animation: glow 2s infinite alternate;
    }

    @keyframes glow { from { opacity: 0.7; } to { opacity: 1; } }

    .mouth {
      width: 100px;
      height: 30px;
      background: #222;
      border-radius: 0 0 50% 50%;
      transition: transform 0.2s;
      z-index: 2;
      box-shadow: 
        inset 0 -5px 10px rgba(0, 0, 0, 0.5),
        0 5px 10px rgba(0, 0, 0, 0.3);
    }

    @keyframes speak {
      0%   { transform: scaleY(1); }
      50%  { transform: scaleY(1.5); }
      100% { transform: scaleY(1); }
    }

    .buttons {
      margin-top: 30px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    button {
      padding: 10px 20px;
      background: #0ff;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      color: #000;
      box-shadow: 0 0 10px #0ff;
      transition: all 0.3s;
      font-weight: bold;
    }

    button:hover {
      background: #0cc;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px #0ff;
    }

    .camera-section {
      display: none;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
      width: 100%;
      max-width: 500px;
    }

    #cameraPreview {
      width: 100%;
      max-width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      margin-bottom: 15px;
    }

    .camera-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    #capturedImage {
      max-width: 300px;
      max-height: 300px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      display: none;
      margin-bottom: 15px;
    }

    .response-box {
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid #0ff;
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
      max-width: 500px;
      width: 100%;
      display: none;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    }

    .status {
      margin-top: 10px;
      font-style: italic;
      color: #0ff;
      text-align: center;
      min-height: 24px;
    }

    .command-input {
      margin-top: 20px;
      width: 100%;
      max-width: 500px;
    }

    .command-input input {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #0ff;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 1rem;
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }

    .command-input button { width: 100%; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>PPIRC AI.<br>Your AI friend. </h1>
  
  <div class="robot-container">
    <div class="robot-face">
      <div class="face-plate"></div>
      <div class="ear left-ear" id="left-ear"></div>
      <div class="ear right-ear" id="right-ear"></div>

      <div class="eyes">
        <div class="eye left-eye"></div>
        <div class="eye right-eye"></div>
      </div>

      <div class="mouth" id="mouth"></div>
    </div>
  </div>

  <div class="buttons">
    <button onclick="startListening()">Start Listening</button>
    <button id="stopBtn">Stop</button>
    <button onclick="startTalking()">Introduce</button>
    <button onclick="toggleCamera()">Camera</button>
    <button onclick="selectFromGallery()">Gallery</button>
  </div>

  <div class="camera-section" id="cameraSection">
    <video id="cameraPreview" autoplay playsinline></video>
    <div class="camera-controls">
      <button onclick="captureImage()">Capture</button>
      <button onclick="closeCamera()">Close</button>
    </div>
    <input type="file" id="galleryInput" accept="image/*" style="display: none;">
    <canvas id="imageCanvas" style="display: none;"></canvas>
    <img id="capturedImage" alt="Captured Image">
    
    <div class="command-input">
      <input type="text" id="imageCommand" placeholder="What would you like to know about this image?">
      <button id="analyzeBtn" onclick="analyzeImage()" style="display: none;">Analyze Image</button>
    </div>
  </div>

  <div class="response-box" id="responseBox">
    <h3>Analysis Result:</h3>
    <p id="responseText"></p>
  </div>

  <div class="status" id="status"></div>

  <script src="https://js.puter.com/v2/"></script>
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=w5EoCh7f"></script>
  <script>
    const mouth = document.getElementById("mouth");
    const leftEar = document.getElementById("left-ear");
    const rightEar = document.getElementById("right-ear");
    const stopBtn = document.getElementById("stopBtn");
    const cameraSection = document.getElementById("cameraSection");
    const cameraPreview = document.getElementById("cameraPreview");
    const capturedImage = document.getElementById("capturedImage");
    const imageCanvas = document.getElementById("imageCanvas");
    const galleryInput = document.getElementById("galleryInput");
    const analyzeBtn = document.getElementById("analyzeBtn");
    const responseBox = document.getElementById("responseBox");
    const responseText = document.getElementById("responseText");
    const status = document.getElementById("status");
    const imageCommand = document.getElementById("imageCommand");

    let stream = null;
    let isCameraActive = false;
    let currentImageFile = null;

    // ðŸ”¹ Voice recognition
    function startListening() {
      if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
        alert("Speech Recognition not supported in this browser.");
        return;
      }
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      leftEar.classList.add("listening");
      rightEar.classList.add("listening");
      status.textContent = "Listening...";

      recognition.start();

      recognition.onresult = async function (event) {
        const transcript = event.results[0][0].transcript;
        if (currentImageFile && /(analyze|describe|what)/i.test(transcript)) {
          status.textContent = "Analyzing image based on your command...";
          analyzeImageWithCommand(transcript);
        } else {
          const response = await puter.ai.chat(transcript);
          respond(response.message.content);
        }
      };

      stopBtn.onclick = () => {
        responsiveVoice.cancel();
        mouth.style.animation = "none";
        recognition.stop();
        leftEar.classList.remove("listening");
        rightEar.classList.remove("listening");
        status.textContent = "";
      };

      recognition.onerror = (e) => {
        leftEar.classList.remove("listening");
        rightEar.classList.remove("listening");
        status.textContent = "Error: " + e.error;
      };

      recognition.onend = () => {
        leftEar.classList.remove("listening");
        rightEar.classList.remove("listening");
        status.textContent = "";
      };
    }

    function startTalking() {
      const message = "Hello! I'm Robo, your universal assistant. I can answer questions, or analyze images. Use the camera or gallery to provide an image, then tell me what you'd like to know!";
      responsiveVoice.speak(message, "UK English Male", {
        onstart: () => mouth.style.animation = "speak 0.3s infinite",
        onend: () => mouth.style.animation = "none"
      })
    }

    function respond(message) {
      responsiveVoice.speak(message, "UK English Male", {
        onstart: () => mouth.style.animation = "speak 0.3s infinite",
        onend: () => mouth.style.animation = "none"
      });
    }

    // ðŸ”¹ Camera functions
    async function toggleCamera() {
      if (isCameraActive) return closeCamera();
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        cameraPreview.srcObject = stream;
        cameraSection.style.display = "flex";
        isCameraActive = true;
        status.textContent = "Camera active. Capture an image.";
      } catch (err) {
        status.textContent = "Camera error: " + err.message;
      }
    }

    function closeCamera() {
      if (stream) stream.getTracks().forEach(track => track.stop());
      stream = null;
      cameraSection.style.display = "none";
      capturedImage.style.display = "none";
      analyzeBtn.style.display = "none";
      isCameraActive = false;
      currentImageFile = null;
      status.textContent = "";
    }

    function captureImage() {
      const ctx = imageCanvas.getContext('2d');
      imageCanvas.width = cameraPreview.videoWidth;
      imageCanvas.height = cameraPreview.videoHeight;
      ctx.drawImage(cameraPreview, 0, 0);
      imageCanvas.toBlob(blob => {
        currentImageFile = new File([blob], "camera.png", { type: "image/png" });
        capturedImage.src = URL.createObjectURL(currentImageFile);
        capturedImage.style.display = "block";
        analyzeBtn.style.display = "block";
        status.textContent = "Image captured.";
      });
    }

    function selectFromGallery() { galleryInput.click(); }
    galleryInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        currentImageFile = file;
        capturedImage.src = URL.createObjectURL(file);
        capturedImage.style.display = "block";
        analyzeBtn.style.display = "block";
        cameraSection.style.display = "flex";
        status.textContent = "Image selected.";
      }
    };

    // ðŸ”¹ Image analysis
    async function analyzeImage() {
      if (!currentImageFile) return status.textContent = "No image to analyze.";
      analyzeImageWithCommand(imageCommand.value || "What is in this image?");
    }

    async function analyzeImageWithCommand(command) {
      if (!currentImageFile) return;
      try {
        status.textContent = "Analyzing image...";
        responseBox.style.display = "none";

        const aiResponse = await puter.ai.chat({
          model: "gpt-4o-mini", // vision-capable
          input: [
            { role: "user", content: command },
            { role: "user", content: currentImageFile }
          ]
        });

        const msg = aiResponse.output_text || aiResponse.message?.content || "No description.";
        responseText.textContent = msg;
        responseBox.style.display = "block";
        status.textContent = "Analysis complete.";
        respond(msg);

      } catch (err) {
        console.error("Error:", err);
        status.textContent = "Error analyzing image.";
      }
    }

    imageCommand.addEventListener("keypress", e => { if (e.key === "Enter") analyzeImage(); });
  </script>
</body>
</html>
  
</body>
</html>
